{% extends 'blog/base.html' %}

{% block title %}
    Главная страница
{% endblock %}

{% block content %}

    <div class="row upload">
        <div class="col-lg-2" >
            <img src="../../static/media/icon.png" width="150" alt="TextAnalysis">
        </div>
        <div class="col-lg-8">
            <h1> Добро пожаловать! </h1>
            <p class="text_welcome">
            Проект <a href="http://textanalysis.ru">TextAnalysis.ru</a> посвящен анализированию
            качества текстов в сети Интернет</p>
        </div>
        <div class="col-lg-2 upload_div">
            <form action="{% url 'upload_file' %}"  enctype="multipart/form-data"
                  method="post" id="fileupload" name="fileupload" onsubmit="return false">
                {% csrf_token %}
                <div class="file-upload vcenter buttons" onchange="return document.getElementById('fileupload').submit();">
                    <label>
                        <input type="file" accept="text/*" name="file_upload" id="file_upload"  >
                        <span>Текст</span>
                    </label>
                </div>
            </form>
        </div>
    </div>

    <div class="row">
        <div  id="textarea_div" class="textdiv">
            <form>
                <textarea id="textarea" style="font-size: 20px" class="textarea" readonly disabled title="">{{Text}}</textarea>
            </form>
        </div>
    </div>

    <div class="row" style="padding-top: 50px">
        <div class="col-lg-9">
            <h2>Оценка текста</h2>
        </div>
        <div class="col-lg-1" style="margin-left: auto; margin-right: auto; text-align: center;">
            <img class="loading" src="../../static/media/25.gif" name="progr" id="progr">
        </div>
        <div class="col-lg-2">
            <form action="{% url 'start' %}" enctype="multipart/form-data" method="get" id="start_analysis">
                <div class="inputfile_div">
                    {% csrf_token %}
                    <input class="inputfile progress buttons" id="analysis" type="submit"  value="Анализ">
                </div>
            </form>
        </div>
    </div>

<script type="text/javascript">
{#    var frm = $('#fileupload');#}
{#file = new FormData(document.forms.fileupload);#}
{#file.append( 'file_upload',  $('input[type=file]')[0].files[0] );#}
{#var data = $("form").serialize();#}
{##}
{#    function asda() {#}
{#        $.ajax({#}
{#            type: 'POST',#}
{#            url: {% url 'upload_file' %},#}
{#            data: file,#}
{#            success: function (data) {#}
{#                alert(data);#}
{#                $("#textarea_div").html(data);#}
{#            },#}
{#            error: function (data) {#}
{#                alert(data)#}
{#            }#}
{#        });#}
{#        return false;#}
{#    }#}

  $(document).ready(function() {
        $('#analysis').click(function(){
            $('.loading').css('visibility', 'visible');
            $('.loading').css('padding-top', '20px');
        });
    });

</script>

    <div style="margin-top: 20px">
        <table class="table" id="table">
            <tr style="font-size: 20px"><th>Критерий</th><th>Оценка</th></tr>
            <tr style="font-size: 20px"><td>Водность</td><td>{{ water|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Информативность</td><td>{{ inform|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Орфографическая корректность</td><td>{{ orthograf|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Синтаксическая корректность</td><td>{{ syntax|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Рекламность</td><td>{{ advert|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Тональность</td><td>{{ tonal|default:0 }}</td></tr>
            <tr style="font-size: 20px"><td>Общая оценка</td><td>{{ total|default:0 }}</td></tr>
        </table>
    </div>

{% endblock %}